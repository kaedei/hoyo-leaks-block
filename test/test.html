<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hoyo Leaks Block - æµ‹è¯•é¡µé¢</title>
  <style>
    body {
      font-family: 'Microsoft YaHei', 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }

    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 30px;
    }

    .test-section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    .test-section h2 {
      color: #667eea;
      margin-bottom: 15px;
    }

    .test-content {
      margin-bottom: 15px;
      padding: 15px;
      background: white;
      border-radius: 6px;
      border-left: 4px solid #667eea;
    }

    .blocked-content {
      color: #dc3545;
      font-weight: bold;
    }

    .safe-content {
      color: #28a745;
    }

    .hoyo-blur-block {
      filter: blur(30px);
      transition: filter 0.3s ease;
    }

    .hoyo-blur-block:hover {
      filter: blur(5px);
    }

    .test-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background: #667eea;
      color: white;
    }

    .btn-primary:hover {
      background: #5a67d8;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background: #5a6268;
    }

    .status {
      padding: 10px;
      margin: 10px 0;
      border-radius: 6px;
      font-weight: bold;
    }

    .status.success {
      background: #d4edda;
      color: #155724;
    }

    .status.error {
      background: #f8d7da;
      color: #721c24;
    }

    .status.info {
      background: #d1ecf1;
      color: #0c5460;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>ğŸ›¡ï¸ Hoyo Leaks Block æµ‹è¯•é¡µé¢</h1>

    <div class="test-buttons">
      <button class="btn btn-primary" onclick="testExtension()">æµ‹è¯•æ‰©å±•åŠŸèƒ½</button>
      <button class="btn btn-secondary" onclick="toggleBlur()">åˆ‡æ¢æ¨¡ç³Šæ•ˆæœ</button>
      <button class="btn btn-primary" onclick="checkStorage()">æ£€æŸ¥å­˜å‚¨</button>
    </div>

    <div id="status-container"></div>

    <div class="test-section">
      <h2>ğŸš« åº”è¯¥è¢«å±è”½çš„å†…å®¹</h2>
      <div class="test-content blocked-content">
        <h3>åŸç¥å†…é¬¼çˆ†æ–™ï¼šæ–°è§’è‰²æŠ€èƒ½æå‰æ³„éœ²</h3>
        <p>è¿™æ˜¯ä¸€ä¸ªåŒ…å«å†…é¬¼å…³é”®è¯çš„æµ‹è¯•å†…å®¹ï¼Œåº”è¯¥è¢«å±è”½ã€‚</p>
      </div>
      <div class="test-content blocked-content">
        <h3>æ˜Ÿé“leakï¼šæ–°ç‰ˆæœ¬betaæµ‹è¯•å†…å®¹</h3>
        <p>è¿™æ˜¯å¦ä¸€ä¸ªåŒ…å«leakå’Œbetaå…³é”®è¯çš„æµ‹è¯•å†…å®¹ã€‚</p>
      </div>
      <div class="test-content blocked-content">
        <h3>æµ‹è¯•æœå†…éƒ¨æ¶ˆæ¯ï¼šæœªå…¬å¼€è§’è‰²ä¿¡æ¯</h3>
        <p>åŒ…å«æµ‹è¯•æœå’Œå†…éƒ¨å…³é”®è¯çš„å†…å®¹ã€‚</p>
      </div>
    </div>

    <div class="test-section">
      <h2>âœ… æ­£å¸¸å†…å®¹</h2>
      <div class="test-content safe-content">
        <h3>åŸç¥å®˜æ–¹å…¬å‘Šï¼šæ–°æ´»åŠ¨å³å°†ä¸Šçº¿</h3>
        <p>è¿™æ˜¯æ­£å¸¸çš„å®˜æ–¹å…¬å‘Šå†…å®¹ï¼Œä¸åº”è¯¥è¢«å±è”½ã€‚</p>
      </div>
      <div class="test-content safe-content">
        <h3>æ¸¸æˆæ”»ç•¥ï¼šå¦‚ä½•æå‡è§’è‰²ç­‰çº§</h3>
        <p>è¿™æ˜¯æ­£å¸¸çš„æ¸¸æˆæ”»ç•¥å†…å®¹ã€‚</p>
      </div>
      <div class="test-content safe-content">
        <h3>ç©å®¶åˆ†äº«ï¼šæˆ‘çš„æ¸¸æˆä½“éªŒ</h3>
        <p>è¿™æ˜¯æ­£å¸¸çš„ç©å®¶åˆ†äº«å†…å®¹ã€‚</p>
      </div>
    </div>

    <div class="test-section">
      <h2>ğŸ”§ åŠŸèƒ½æµ‹è¯•</h2>
      <div class="test-content">
        <h3>æ‰©å±•çŠ¶æ€æ£€æŸ¥</h3>
        <p id="extension-status">æ£€æŸ¥ä¸­...</p>
      </div>
      <div class="test-content">
        <h3>å­˜å‚¨åŠŸèƒ½æµ‹è¯•</h3>
        <p id="storage-status">æœªæµ‹è¯•</p>
      </div>
      <div class="test-content">
        <h3>å±è”½åŠŸèƒ½æµ‹è¯•</h3>
        <p id="block-status">æœªæµ‹è¯•</p>
      </div>
    </div>
  </div>

  <script>
    // æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯
    function showStatus(message, type = 'info') {
      const container = document.getElementById('status-container');
      const statusDiv = document.createElement('div');
      statusDiv.className = `status ${type}`;
      statusDiv.textContent = message;
      container.appendChild(statusDiv);

      setTimeout(() => {
        container.removeChild(statusDiv);
      }, 3000);
    }

    // æµ‹è¯•æ‰©å±•åŠŸèƒ½
    function testExtension() {
      if (typeof chrome !== 'undefined' && chrome.runtime) {
        showStatus('âœ… Chromeæ‰©å±•APIå¯ç”¨', 'success');
        document.getElementById('extension-status').textContent = 'âœ… æ‰©å±•å·²åŠ è½½';

        // æ£€æŸ¥æ‰©å±•æ˜¯å¦è¿è¡Œ
        chrome.runtime.sendMessage({ action: 'ping' }, function (response) {
          if (chrome.runtime.lastError) {
            showStatus('âŒ æ‰©å±•é€šä¿¡å¤±è´¥', 'error');
          } else {
            showStatus('âœ… æ‰©å±•é€šä¿¡æ­£å¸¸', 'success');
          }
        });
      } else {
        showStatus('âŒ Chromeæ‰©å±•APIä¸å¯ç”¨', 'error');
        document.getElementById('extension-status').textContent = 'âŒ æ‰©å±•æœªåŠ è½½';
      }
    }

    // åˆ‡æ¢æ¨¡ç³Šæ•ˆæœ
    function toggleBlur() {
      const blockedContents = document.querySelectorAll('.blocked-content');
      blockedContents.forEach(content => {
        content.classList.toggle('hoyo-blur-block');
      });

      const isBlurred = document.querySelector('.blocked-content.hoyo-blur-block');
      showStatus(isBlurred ? 'ğŸš« æ¨¡ç³Šæ•ˆæœå·²å¯ç”¨' : 'ğŸ‘ï¸ æ¨¡ç³Šæ•ˆæœå·²ç¦ç”¨', 'info');
      document.getElementById('block-status').textContent = isBlurred ? 'âœ… æ¨¡ç³Šæ•ˆæœæ­£å¸¸' : 'âš ï¸ æ¨¡ç³Šæ•ˆæœå·²ç¦ç”¨';
    }

    // æ£€æŸ¥å­˜å‚¨
    function checkStorage() {
      if (typeof chrome !== 'undefined' && chrome.storage) {
        chrome.storage.sync.get(null, function (result) {
          console.log('å½“å‰å­˜å‚¨çš„é…ç½®:', result);
          showStatus('âœ… å­˜å‚¨æ£€æŸ¥å®Œæˆï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°', 'success');
          document.getElementById('storage-status').textContent = 'âœ… å­˜å‚¨åŠŸèƒ½æ­£å¸¸';
        });
      } else {
        showStatus('âŒ æ— æ³•è®¿é—®å­˜å‚¨API', 'error');
        document.getElementById('storage-status').textContent = 'âŒ å­˜å‚¨APIä¸å¯ç”¨';
      }
    }

    // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥
    window.addEventListener('load', function () {
      setTimeout(testExtension, 1000);
    });
  </script>
</body>

</html>
